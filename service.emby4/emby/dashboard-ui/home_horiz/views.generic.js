define(["cardBuilder","focusManager","emby-itemscontainer"],function(cardBuilder,focusManager){"use strict";return function(element,apiClient,parentId,autoFocus){var self=this;this.parentId=parentId,this.apiClient=apiClient,this.itemsContainer=element.querySelector(".itemsContainer"),this.itemsContainer.fetchData=function(){var apiClient=this.apiClient;return apiClient.getItems(apiClient.getCurrentUserId(),{ParentId:this.parentId,EnableImageTypes:"Primary,Backdrop,Thumb",SortBy:"SortName",Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",ImageTypeLimit:1})}.bind(this),this.itemsContainer.getItemsHtml=function(items){return cardBuilder.getCardsHtml({items:items,shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},overlayText:!0,context:"folders"})}.bind(this),self.loadData=function(isRefresh){return self.itemsContainer.resume({refresh:isRefresh}).then(function(){isRefresh&&autoFocus&&focusManager.autoFocus(self.itemsContainer)})},self.onPause=function(){self.itemsContainer.pause()},self.destroy=function(){this.itemsContainer=null,this.apiClient=null}}});