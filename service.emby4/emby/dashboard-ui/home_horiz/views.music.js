define(["cardBuilder","focusManager","emby-itemscontainer"],function(cardBuilder,focusManager){"use strict";function gotoMusicView(tab,parentId,apiClient){Emby.Page.show("/music?tab="+tab+"&parentId="+parentId+"&serverId="+apiClient.serverId())}return function(element,apiClient,parentId,autoFocus){autoFocus&&focusManager.autoFocus(element,!0),this.loadData=function(isRefresh){return isRefresh?Promise.all([function(apiClient,element,parentId){var options={IncludeItemTypes:"Audio",Limit:9,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return apiClient.getLatestItems(options).then(function(result){var section=element.querySelector(".latestSection");cardBuilder.buildCards(result,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Playlist",Recursive:!0,ParentId:parentId,Fields:"PrimaryImageAspectRatio,SortName,CumulativeRunTimeTicks,CanDelete",StartIndex:0,Limit:9,ImageTypeLimit:1};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".playlistsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",showTitle:!0,overlayText:!0,rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"DatePlayed",SortOrder:"Descending",IncludeItemTypes:"Audio",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsPlayed",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".recentlyPlayedSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",action:"instantmix",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"PlayCount",SortOrder:"Descending",IncludeItemTypes:"Audio",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio",Filters:"IsPlayed",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".frequentlyPlayedSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",action:"instantmix",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"Random",IncludeItemTypes:"Audio",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsFavorite",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".favoriteSongsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",action:"instantmix",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"Random",IncludeItemTypes:"MusicAlbum",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsFavorite",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".favoriteAlbumsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"Random",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsFavorite",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return apiClient.getArtists(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".favoriteArtistsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1})})}(apiClient,element,parentId)]):Promise.resolve()},element.querySelector(".artistsCard").addEventListener("click",function(){gotoMusicView("2",parentId,apiClient)}),element.querySelector(".albumsCard").addEventListener("click",function(){gotoMusicView("1",parentId,apiClient)}),element.querySelector(".genresCard").addEventListener("click",function(){gotoMusicView("5",parentId,apiClient)}),this.onPause=function(){},this.destroy=function(){}}});