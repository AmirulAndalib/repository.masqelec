define(["connectionManager","dialogHelper","apphost","globalize","browser","layoutManager","dom","appRouter","css!./backmenu.css","paper-icon-button-light","material-icons","roundCardStyle","emby-itemscontainer","emby-scroller","flexStyles"],function(connectionManager,dialogHelper,apphost,globalize,browser,layoutManager,dom,appRouter){"use strict";var currentColorIndex=1;function getButton(name,icon,option){var cardImageContainer='<i class="cardImageIcon md-icon">'+icon+"</i>",cardBoxCssClass="cardBox cardBox-round";layoutManager.tv&&(cardBoxCssClass+=" cardBox-focustransform");return'<button raised class="card card-round squareCard loginSquareCard scalableCard round backMenuButton" data-option="'+option+'">'+('<div class="'+cardBoxCssClass+'">')+'<div class="cardScalable"><div class="cardPadder cardPadder-square"></div><div class="cardContent cardContent-round"><div style="background-color:#52B54B;" class="cardImageContainer cardImageContainer-round coveredImage defaultCardBackground'+function(min,max){var ret=currentColorIndex;return max<++currentColorIndex&&(currentColorIndex=min),ret}(1,5)+'">'+cardImageContainer+'</div></div></div><div class="cardFooter cardFooter-round"><div class="cardText cardTextCentered">'+name+"</div></div></div></button>"}return function(options){var dialogResult;currentColorIndex=1;var dlg=dialogHelper.createDialog({entryAnimation:"fadein",exitAnimation:"fadeout",removeOnClose:!0,size:"fullscreen"});dlg.classList.add("backMenu");var html="";html+='<div is="emby-scroller" class="flex flex-grow" data-mousewheel="true" data-centerfocus="true">',html+='<div is="emby-itemscontainer" class="backMenuContent scrollSlider padded-left padded-right flex align-items-center flex-direction-row">',options.showHome&&(html+=getButton(globalize.translate("Home"),"&#xE88A;","home"));var apiClient=connectionManager.currentApiClient();return apiClient&&(browser.operaTv||browser.web0s)&&"6da60dd6edfc4508bca2c434d4400816"===apiClient.serverId()||(html+=getButton(globalize.translate("Settings"),"&#xE8B8;","settings")),apphost.supports("multiserver")&&(html+=getButton(globalize.translate("HeaderChangeServer"),"&#xE63E;","selectserver")),html+=getButton(globalize.translate("HeaderSignOut"),"&#xE879;","logout"),apphost.supports("exit")&&(html+=getButton(globalize.translate("Exit"),"&#xE879;","exit")),apphost.supports("sleep")&&(html+=getButton(globalize.translate("Sleep"),"&#xE426;","sleep")),apphost.supports("shutdown")&&(html+=getButton(globalize.translate("Shutdown"),"&#xE8AC;","shutdown")),apphost.supports("restart")&&(html+=getButton(globalize.translate("Restart"),"&#xE5D5;","restart")),html+="</div",html+="</div",dlg.innerHTML=html,document.body.appendChild(dlg),dlg.addEventListener("click",function(e){var backMenuButton=dom.parentWithClass(e.target,"backMenuButton");backMenuButton&&(dialogResult=backMenuButton.getAttribute("data-option"),dialogHelper.close(dlg))}),dialogHelper.open(dlg).then(function(){switch(dialogResult){case"logout":appRouter.logout();break;case"home":appRouter.goHome();break;case"exit":apphost.exit();break;case"sleep":apphost.sleep();break;case"shutdown":apphost.shutdown();break;case"restart":apphost.restart();break;case"settings":appRouter.showSettings();break;case"selectserver":appRouter.showSelectServer();break;default:!0}})}});