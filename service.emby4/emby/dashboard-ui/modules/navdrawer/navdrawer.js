define(["dom","css!./navdrawer","scrollStyles"],function(dom){"use strict";var instance,mask,animatePos,navDrawerElement=document.querySelector(".mainDrawer");function onMainDrawerClick(e){dom.parentWithTag(e.target,"A")&&instance.close()}function NavDrawer(){instance=this,navDrawerElement.classList.add("scrollY"),navDrawerElement.classList.add("scrollY-mini"),dom.addEventListener(navDrawerElement,"click",onMainDrawerClick,{passive:!0}),this.isVisible=!1}function animateToPositionCallback(){var pos=animatePos;navDrawerElement.style.transform=pos?"translateX("+pos+")":"none"}function getScrollingElement(){return document.scrollingElement||document.documentElement}function onMaskTransitionEnd(e){if(e.target===e.currentTarget){var maskElement=mask;maskElement&&maskElement.classList.contains("drawer-backdrop-fadeout")&&(maskElement.parentNode.removeChild(maskElement),mask=null)}}return NavDrawer.prototype.animateToPosition=function(pos){animatePos=pos,requestAnimationFrame(animateToPositionCallback)},NavDrawer.prototype.open=function(){this.animateToPosition("100%"),this.isVisible=!0,navDrawerElement.classList.add("drawer-open"),this.showMask(),getScrollingElement().classList.add("withDialogOpen"),navDrawerElement.dispatchEvent(new CustomEvent("drawer-opening",{cancelable:!1,bubbles:!1}))},NavDrawer.prototype.close=function(){this.animateToPosition(0),this.isVisible=!1,navDrawerElement.classList.remove("drawer-open"),this.hideMask(),getScrollingElement().classList.remove("withDialogOpen")},NavDrawer.prototype.toggle=function(){this.isVisible?this.close():this.open()},NavDrawer.prototype.showMask=function(){mask=mask||function(instance){var mask=document.createElement("div");return mask.className="drawer-backdrop",dom.addEventListener(mask,dom.whichAnimationEvent(),onMaskTransitionEnd,{passive:!0,capture:!0}),dom.addEventListener(mask,"click",instance.close.bind(instance),{passive:!0}),document.body.appendChild(mask),mask}(this)},NavDrawer.prototype.hideMask=function(){mask&&mask.classList.add("drawer-backdrop-fadeout")},new NavDrawer});