define(["layoutManager","cardBuilder","listView","playbackManager","userSettings","alphaPicker","connectionManager","focusManager","loading","globalize","browser"],function(layoutManager,cardBuilder,listView,playbackManager,userSettings,AlphaPicker,connectionManager,focusManager,loading,globalize,browser){"use strict";function initAlphaNumericShortcuts(instance){require(["alphaNumericShortcuts"],function(AlphaNumericShortcuts){instance.alphaNumericShortcuts=new AlphaNumericShortcuts({itemsContainer:instance.itemsContainer}),instance.alphaNumericShortcuts.onAlphaNumericValueEntered=function(value){trySelectValue(this,this.scroller,this.view,value,layoutManager.tv)}.bind(instance)})}function trySelectValue(instance,scroller,view,value,focus){value&&"#"!==value?instance.getItems({Limit:0}).then(function(totalResult){instance.getItems({Limit:0,NameStartsWithOrGreater:value}).then(function(result){instance.itemsContainer.scrollToIndex(Math.max(totalResult.TotalRecordCount-result.TotalRecordCount,0),focus)})}):instance.itemsContainer.scrollToIndex(0,focus)}function initAlphaPicker(instance,view){instance.itemsContainer=view.querySelector(".itemsContainer"),instance.alphaPicker=new AlphaPicker({element:instance.alphaPickerElement,itemsContainer:instance.itemsContainer,prefixes:[],setValueOnFocus:!0}),instance.alphaPicker.on("alphavaluechanged",function(e){var value=e.detail.value;this.scroller,trySelectValue(this,0,this.itemsContainer,value)}.bind(instance))}function showFilterMenu(){var instance=this;require(["filterMenu"],function(FilterMenu){(new FilterMenu).show({settingsKey:instance.getSettingsKey(),settings:instance.getFilters(),visibleSettings:instance.getVisibleFilters(),onChange:instance.itemsContainer.refreshItems.bind(instance.itemsContainer),parentId:instance.isGlobalQuery()?null:instance.params.parentId,itemTypes:instance.getItemTypes?instance.getItemTypes():[],serverId:instance.apiClient.serverId(),filterMenuOptions:instance.getFilterMenuOptions()}).then(function(){refreshAfterSettingsChange(instance)})})}function getDetaultSortOrder(sortBy){return!sortBy||0!==(sortBy=sortBy.toLowerCase()).indexOf("sortname")&&0!==sortBy.indexOf("runtime")&&0!==sortBy.indexOf("album")&&0!==sortBy.indexOf("isfolder")&&0!==sortBy.indexOf("channelnumber")?"Descending":"Ascending"}function showSortMenu(e){var instance=this;require(["actionsheet"],function(actionsheet){var options=instance.getSortMenuOptions();!function(instance,options){for(var currentValues=instance.getSortValues(),i=0,length=options.length;i<length;i++){var opt=options[i];if(opt.selected=opt.value===currentValues.sortBy,opt.selected){var icon="Descending"===currentValues.sortOrder?"&#xE5DB;":"&#xE5D8;";opt.asideIcon=icon;break}}}(instance,options),options.sort(compareByName),actionsheet.show({items:options,positionTo:e.target,title:globalize.translate("LabelSortBy")}).then(function(value){var currentValues=instance.getSortValues(),sortOrder=currentValues.sortOrder;sortOrder=currentValues.sortBy===value?"Ascending"===sortOrder?"Descending":"Ascending":getDetaultSortOrder(value);var settingsKey=instance.getSettingsKey();userSettings.setFilter(settingsKey+"-sortby",value),userSettings.setFilter(settingsKey+"-sortorder",sortOrder),updateSortText(instance),refreshAfterSettingsChange(instance)})})}function showViewSettingsMenu(){var instance=this;require(["viewSettings"],function(ViewSettings){(new ViewSettings).show({settingsKey:instance.getSettingsKey(),settings:instance.getViewSettings(),visibleSettings:instance.getVisibleViewSettings()}).then(function(){updateItemsContainerForViewType(instance),refreshAfterSettingsChange(instance)})})}function refreshAfterSettingsChange(instance){instance.itemsContainer.refreshItems()}function updateItemsContainerForViewType(instance){"list"===instance.getViewSettings().imageType?(instance.itemsContainer.classList.remove("vertical-wrap"),instance.itemsContainer.classList.add("vertical-list")):(instance.itemsContainer.classList.add("vertical-wrap"),instance.itemsContainer.classList.remove("vertical-list"))}function updateSortText(instance){var btnSortText=instance.btnSortText;if(btnSortText){for(var options=instance.getSortMenuOptions(),values=instance.getSortValues(),sortBy=values.sortBy,i=0,length=options.length;i<length;i++)if(sortBy===options[i].value){btnSortText.innerHTML=globalize.translate("SortByValue",options[i].name);break}var btnSortIcon=instance.btnSortIcon;btnSortIcon&&(btnSortIcon.innerHTML="Descending"===values.sortOrder?"&#xE5DB;":"&#xE5D8;")}}function bindAll(elems,eventName,fn){for(var i=0,length=elems.length;i<length;i++)elems[i].addEventListener(eventName,fn)}function hideOrShowAll(elems,hide){for(var i=0,length=elems.length;i<length;i++)hide?elems[i].classList.add("hide"):elems[i].classList.remove("hide")}function afterRefresh(result){var items=result.Items||result,totalRecordCount=result.TotalRecordCount||items.length;!function(instance,view,totalRecordCount){var elem=view.querySelector(".listTotalRecordCount");elem&&(elem.innerHTML=1===totalRecordCount?globalize.translate("ValueOneItem"):globalize.translate("ItemCount",totalRecordCount))}(0,this.view,totalRecordCount),totalRecordCount||this.setEmptyListState(),function(instance,numItems){if(instance.alphaPicker){var alphaPicker=instance.alphaPickerElement;if(alphaPicker){var values=instance.getSortValues(),elemWithPadding=instance.itemsContainer.classList.contains("padded-left")?instance.itemsContainer:instance.itemsContainer.parentNode;"SortName"===values.sortBy&&"Ascending"===values.sortOrder&&30<numItems?(alphaPicker.classList.remove("hide"),layoutManager.tv?(elemWithPadding.classList.remove("padded-right-withalphapicker"),elemWithPadding.classList.add("padded-left-withalphapicker"),alphaPicker.classList.add("alphaPicker-fixed-left"),alphaPicker.classList.remove("alphaPicker-fixed-right")):(elemWithPadding.classList.remove("padded-left-withalphapicker"),elemWithPadding.classList.add("padded-right-withalphapicker"),alphaPicker.classList.remove("alphaPicker-fixed-left"),alphaPicker.classList.add("alphaPicker-fixed-right")),instance.refreshPrefixes()):(alphaPicker.classList.add("hide"),elemWithPadding.classList.remove("padded-left-withalphapicker"),elemWithPadding.classList.remove("padded-right-withalphapicker"))}}}(this,totalRecordCount),hideOrShowAll(this.view.querySelectorAll(".btnPlay"),!totalRecordCount),hideOrShowAll(this.view.querySelectorAll(".btnShuffle"),!(totalRecordCount&&this.supportsShuffle()))}function ItemsTab(view,params){var i,length,hasAnyViewSettings;this.view=view,(this.params=params).serverId&&(this.apiClient=connectionManager.getApiClient(params.serverId)),this.itemsContainer=view.querySelector(".itemsContainer"),this.scroller=view.querySelector(".scrollFrameY"),this.itemsContainer.fetchData=this.getItems.bind(this),this.itemsContainer.virtualChunkSize=this.virtualChunkSize(),this.itemsContainer.getListOptions=this.getListOptions.bind(this),this.itemsContainer.afterRefresh=afterRefresh.bind(this),params.parentId&&!this.isGlobalQuery()&&this.itemsContainer.setAttribute("data-parentid",params.parentId);var btnViewSettings=view.querySelectorAll(".btnViewSettings");for(i=0,length=btnViewSettings.length;i<length;i++)hasAnyViewSettings=!0,btnViewSettings[i].addEventListener("click",showViewSettingsMenu.bind(this));var filterButtons=view.querySelectorAll(".btnFilter");this.filterButtons=filterButtons;var hasVisibleFilters=this.getVisibleFilters().length;for(i=0,length=filterButtons.length;i<length;i++){var btnFilter=filterButtons[i];btnFilter.addEventListener("click",showFilterMenu.bind(this)),hasVisibleFilters?(hasAnyViewSettings=!0,btnFilter.classList.remove("hide")):btnFilter.classList.add("hide")}var sortButtons=view.querySelectorAll(".btnSort");for(i=0,length=(this.sortButtons=sortButtons).length;i<length;i++){hasAnyViewSettings=!0;var sortButton=sortButtons[i];sortButton.addEventListener("click",showSortMenu.bind(this)),"nextup"!==params.type&&sortButton.classList.remove("hide")}this.btnSortText=view.querySelector(".btnSortText"),this.btnSortIcon=view.querySelector(".btnSortIcon"),this.enableAlphaNumericShortcuts="true"===this.itemsContainer.getAttribute("data-alphanumericshortcuts")&&this.enableVirtualData(),this.alphaPickerElement=view.querySelector(".alphaPicker");var btnPlay=view.querySelectorAll(".btnPlay"),btnShuffle=view.querySelectorAll(".btnShuffle");bindAll(btnPlay,"click",function(){this.getItems({Limit:300}).then(function(result){playbackManager.play({items:result.Items||result})})}.bind(this)),bindAll(btnShuffle,"click",function(){this.getItems({SortBy:"Random",Limit:300}).then(function(result){playbackManager.play({items:result.Items||result})})}.bind(this)),(btnPlay.length||btnShuffle.length)&&(hasAnyViewSettings=!0);var itemsViewSettingsContainer=view.querySelector(".itemsViewSettingsContainer");itemsViewSettingsContainer&&(hasAnyViewSettings?(itemsViewSettingsContainer.classList.add("focusable"),itemsViewSettingsContainer.classList.remove("hide"),itemsViewSettingsContainer.focus=function(){focusManager.autoFocus(this)}.bind(itemsViewSettingsContainer)):itemsViewSettingsContainer.classList.add("hide"))}function compareByName(a,b){return a.name<b.name?-1:a.name>b.name?1:0}return ItemsTab.prototype.refreshPrefixes=function(){var instance=this;instance.prefixesLoaded||this.getPrefixes().then(function(prefixes){instance.prefixesLoaded=!0,instance.alphaPicker.setPrefixes(prefixes)})},ItemsTab.prototype.getPrefixes=function(){var queryInfo=this.getQueryInfo(!1),apiClient=this.apiClient,query=queryInfo.query;return query.SortBy=null,query.SortOrder=null,query.StartIndex=null,query.Limit=null,query.Fields=null,query.EnableImageTypes=null,query.ImageTypeLimit=null,query.NameStartsWithOrGreater=null,query.IncludeItemTypes=this.getPrefixQueryIncludeItemTypes().join(","),apiClient.getPrefixes(apiClient.getCurrentUserId(),query).then(function(result){return result.map(function(i){return i.Name})})},ItemsTab.prototype.getListViewOptions=function(items,settings){return{}},ItemsTab.prototype.getListOptions=function(items){var settings=this.getViewSettings();return"list"===settings.imageType?{renderer:listView,options:this.getListViewOptions(items,settings),virtualScrollLayout:"vertical"}:{renderer:cardBuilder,options:this.getCardOptions(items,settings),virtualScrollLayout:"vertical-grid"}},ItemsTab.prototype.enableVirtualScrolling=function(){return this.itemsContainer.hasAttribute("data-virtualscrolllayout")&&!browser.msie},ItemsTab.prototype.enableVirtualData=function(){return this.enableVirtualScrolling()},ItemsTab.prototype.virtualChunkSize=function(){return 50},ItemsTab.prototype.getCardOptions=function(items,settings){var shape,preferThumb,preferDisc,preferLogo;"banner"===settings.imageType?shape="banner":"disc"===settings.imageType?(shape="square",preferDisc=!0):"logo"===settings.imageType?(shape="square",preferLogo=!0):"thumb"===settings.imageType?(shape="backdrop",preferThumb=!0):shape="auto";var posterOptions={shape:shape,centerText:!0,preferThumb:preferThumb,preferDisc:preferDisc,preferLogo:preferLogo,overlayMoreButton:!layoutManager.tv,showTitle:settings.showTitle,showYear:settings.showYear,overlayText:!settings.showTitle,context:this.getContext(),parentId:this.isGlobalQuery()?null:this.params.parentId,playAction:this.getPlayAction()};if(!posterOptions.overlayText){var lines=0;posterOptions.showTitle&&lines++,posterOptions.showYear&&lines++,posterOptions.lines=lines}return posterOptions.multiSelect=this.enableMultiSelect,posterOptions},ItemsTab.prototype.getPlayAction=function(){return null},ItemsTab.prototype.getContext=function(){return null},ItemsTab.prototype.supportsShuffle=function(){return!0},ItemsTab.prototype.getPrefixQueryIncludeItemTypes=function(){return this.getQueryIncludeItemTypes()},ItemsTab.prototype.getQueryIncludeItemTypes=function(){return this.getItemTypes()},ItemsTab.prototype.getBaseQuery=function(){var sortValues=this.getSortValues(),fields="BasicSyncInfo,MediaSourceCount",settings=this.getViewSettings();"primary"===settings.imageType&&(fields+=",PrimaryImageAspectRatio"),settings.showYear&&(fields+=",ProductionYear");var imageTypes="Primary,Backdrop,Thumb";return"banner"===settings.imageType?imageTypes+=",Banner":"disc"===settings.imageType?imageTypes+=",Disc":"logo"===settings.imageType&&(imageTypes+=",Logo"),{SortBy:sortValues.sortBy,SortOrder:sortValues.sortOrder,IncludeItemTypes:this.getQueryIncludeItemTypes().join(","),Recursive:!0,Fields:fields,ImageTypeLimit:1,EnableImageTypes:imageTypes,StartIndex:0,Limit:this.enableVirtualData()?this.virtualChunkSize():null,ParentId:this.isGlobalQuery()?null:this.params.parentId}},ItemsTab.prototype.getQueryInfo=function(enableFilters){var hasFilters,query=this.getBaseQuery(),queryFilters=[];if("unwatched"===this.mode?queryFilters.push("IsUnplayed"):"favorites"===this.mode&&queryFilters.push("IsFavorite"),!1!==enableFilters){var filters=this.getFilters();filters.SeriesStatus&&(query.SeriesStatus=filters.SeriesStatus,hasFilters=!0),filters.IsPlayed&&(queryFilters.push("IsPlayed"),hasFilters=!0),filters.IsUnplayed&&(queryFilters.push("IsUnplayed"),hasFilters=!0),filters.IsFavorite&&(queryFilters.push("IsFavorite"),hasFilters=!0),filters.IsResumable&&(queryFilters.push("IsResumable"),hasFilters=!0),filters.Containers&&(hasFilters=!0,query.Containers=filters.Containers),filters.AudioCodecs&&(hasFilters=!0,query.AudioCodecs=filters.AudioCodecs),filters.VideoCodecs&&(hasFilters=!0,query.VideoCodecs=filters.VideoCodecs),filters.SubtitleCodecs&&(hasFilters=!0,query.SubtitleCodecs=filters.SubtitleCodecs),filters.GenreIds&&(hasFilters=!0,query.GenreIds=filters.GenreIds),filters.OfficialRatings&&(hasFilters=!0,query.OfficialRatings=filters.OfficialRatings),filters.StudioIds&&(hasFilters=!0,query.StudioIds=filters.StudioIds),filters.TagIds&&(hasFilters=!0,query.TagIds=filters.TagIds),filters.Tags&&(hasFilters=!0,query.Tags=filters.Tags),filters.Years&&(hasFilters=!0,query.Years=filters.Years),filters.Is4K&&(hasFilters=query.Is4K=!0),filters.IsHD&&(hasFilters=query.IsHD=!0),filters.IsSD&&(hasFilters=!(query.IsHD=!1)),filters.Is3D&&(hasFilters=query.Is3D=!0),null!=filters.HasSubtitles&&(query.HasSubtitles=filters.HasSubtitles,hasFilters=!0),null!=filters.HasTrailer&&(query.HasTrailer=filters.HasTrailer,hasFilters=!0),null!=filters.HasSpecialFeature&&(query.HasSpecialFeature=filters.HasSpecialFeature,hasFilters=!0),null!=filters.HasThemeSong&&(query.HasThemeSong=filters.HasThemeSong,hasFilters=!0),null!=filters.HasThemeVideo&&(query.HasThemeVideo=filters.HasThemeVideo,hasFilters=!0),null!=filters.HasOverview&&(query.HasOverview=filters.HasOverview,hasFilters=!0),null!=filters.HasImdbId&&(query.HasImdbId=filters.HasImdbId,hasFilters=!0),null!=filters.HasTvdbId&&(query.HasTvdbId=filters.HasTvdbId,hasFilters=!0),null!=filters.HasTmdbId&&(query.HasTmdbId=filters.HasTmdbId,hasFilters=!0),null!=filters.IsLocked&&(query.IsLocked=filters.IsLocked,hasFilters=!0)}return query.Filters=queryFilters.length?queryFilters.join(","):null,this.getViewSettings().groupItemsIntoCollections&&(query.GroupItemsIntoCollections=!0),{query:query,hasFilters:hasFilters}},ItemsTab.prototype.getItems=function(baseQuery,signal){var queryInfo=this.getQueryInfo();this.setFilterStatus(queryInfo.hasFilters);var apiClient=this.apiClient,query=Object.assign(queryInfo.query,baseQuery||{}),methodName=this.getApiClientQueryMethodName();return"getLiveTvRecordings"===methodName?(query.UserId=apiClient.getCurrentUserId(),apiClient[methodName](query,signal)):apiClient[methodName](apiClient.getCurrentUserId(),query,signal)},ItemsTab.prototype.getApiClientQueryMethodName=function(){return"getItems"},ItemsTab.prototype.getViewSettings=function(){var basekey=this.getSettingsKey(),showYearVisible=-1!==this.getVisibleViewSettings().indexOf("showYear");return{showTitle:"false"!==userSettings.get(basekey+"-showTitle"),showYear:showYearVisible&&"false"!==userSettings.get(basekey+"-showYear"),groupItemsIntoCollections:"true"===userSettings.get(basekey+"-groupItemsIntoCollections"),imageType:userSettings.get(basekey+"-imageType")||this.getDefaultImageType()}},ItemsTab.prototype.getDefaultImageType=function(){return"primary"},ItemsTab.prototype.getSettingsKey=function(){return this.params.parentId+"-1"},ItemsTab.prototype.onResume=function(options){options&&options.refresh&&(updateSortText(this),updateItemsContainerForViewType(this),loading.show());var view=this.view,scroller=this.scroller;scroller&&scroller.resume&&scroller.resume(),this.enableAlphaPicker&&!this.alphaPicker&&initAlphaPicker(this,view),this.enableAlphaNumericShortcuts&&initAlphaNumericShortcuts(this);var instance=this,autoFocus=options.autoFocus;this.itemsContainer.resume(options).then(function(result){loading.hide(),autoFocus&&focusManager.autoFocus(instance.itemsContainer)})},ItemsTab.prototype.refresh=function(options){loading.show();var instance=this,autoFocus=options.autoFocus;this.itemsContainer.refreshItems(options).then(function(result){loading.hide(),autoFocus&&focusManager.autoFocus(instance.itemsContainer)})},ItemsTab.prototype.getVisibleViewSettings=function(){return["showTitle","showYear","imageType"]},ItemsTab.prototype.getFilters=function(){var basekey=this.getSettingsKey();return{IsPlayed:"true"===userSettings.getFilter(basekey+"-filter-IsPlayed"),IsUnplayed:"true"===userSettings.getFilter(basekey+"-filter-IsUnplayed"),IsFavorite:"true"===userSettings.getFilter(basekey+"-filter-IsFavorite"),IsResumable:"true"===userSettings.getFilter(basekey+"-filter-IsResumable"),Is4K:"true"===userSettings.getFilter(basekey+"-filter-Is4K"),IsHD:"true"===userSettings.getFilter(basekey+"-filter-IsHD"),IsSD:"true"===userSettings.getFilter(basekey+"-filter-IsSD"),Is3D:"true"===userSettings.getFilter(basekey+"-filter-Is3D"),VideoTypes:userSettings.getFilter(basekey+"-filter-VideoTypes"),SeriesStatus:userSettings.getFilter(basekey+"-filter-SeriesStatus"),HasSubtitles:userSettings.getFilter(basekey+"-filter-HasSubtitles"),HasTrailer:userSettings.getFilter(basekey+"-filter-HasTrailer"),HasSpecialFeature:userSettings.getFilter(basekey+"-filter-HasSpecialFeature"),HasThemeSong:userSettings.getFilter(basekey+"-filter-HasThemeSong"),HasThemeVideo:userSettings.getFilter(basekey+"-filter-HasThemeVideo"),HasOverview:userSettings.getFilter(basekey+"-filter-HasOverview"),HasImdbId:userSettings.getFilter(basekey+"-filter-HasImdbId"),HasTvdbId:userSettings.getFilter(basekey+"-filter-HasTvdbId"),HasTmdbId:userSettings.getFilter(basekey+"-filter-HasTmdbId"),IsLocked:userSettings.getFilter(basekey+"-filter-IsLocked"),GenreIds:userSettings.getFilter(basekey+"-filter-GenreIds"),StudioIds:userSettings.getFilter(basekey+"-filter-StudioIds"),Tags:userSettings.getFilter(basekey+"-filter-Tags"),TagIds:userSettings.getFilter(basekey+"-filter-TagIds"),OfficialRatings:userSettings.getFilter(basekey+"-filter-OfficialRatings"),Containers:userSettings.getFilter(basekey+"-filter-Containers"),AudioCodecs:userSettings.getFilter(basekey+"-filter-AudioCodecs"),VideoCodecs:userSettings.getFilter(basekey+"-filter-VideoCodecs"),SubtitleCodecs:userSettings.getFilter(basekey+"-filter-SubtitleCodecs"),Years:userSettings.getFilter(basekey+"-filter-Years")}},ItemsTab.prototype.getSortValues=function(){var sortOrder,basekey=this.getSettingsKey(),sortBy=userSettings.getFilter(basekey+"-sortby");return sortOrder=sortBy?"Descending"===userSettings.getFilter(basekey+"-sortorder")?"Descending":"Ascending":getDetaultSortOrder(sortBy=this.getDefaultSortBy()),{sortBy:sortBy,sortOrder:sortOrder}},ItemsTab.prototype.getVisibleFilters=function(){return[]},ItemsTab.prototype.getDefaultSortBy=function(){return"SortName"},ItemsTab.prototype.sortOptionsByName=function(options){options.sort(compareByName)},ItemsTab.prototype.getSortMenuOptions=function(){var sortBy=[],option=this.getNameSortOption();return option&&sortBy.push(option),(option=this.getFolderSortOption())&&sortBy.push(option),(option=this.getCommunityRatingSortOption())&&sortBy.push(option),(option=this.getCriticRatingSortOption())&&sortBy.push(option),(option=this.getDateAddedSortOption())&&sortBy.push(option),(option=this.getDatePlayedSortOption())&&sortBy.push(option),(option=this.getParentalRatingSortOption())&&sortBy.push(option),(option=this.getPlayCountSortOption())&&sortBy.push(option),(option=this.getReleaseDateSortOption())&&sortBy.push(option),(option=this.getRuntimeSortOption())&&sortBy.push(option),(option=this.getChannelNumberSortOption())&&sortBy.push(option),this.sortOptionsByName(sortBy),sortBy},ItemsTab.prototype.getChannelNumberSortOption=function(){return null},ItemsTab.prototype.getDateAddedSortOption=function(){return{name:globalize.translate("DateAdded"),value:"DateCreated,SortName"}},ItemsTab.prototype.getParentalRatingSortOption=function(){return{name:globalize.translate("ParentalRating"),value:"OfficialRating,SortName"}},ItemsTab.prototype.getRuntimeSortOption=function(){return{name:globalize.translate("Runtime"),value:"Runtime,SortName"}},ItemsTab.prototype.getNameSortOption=function(){return{name:globalize.translate("Title"),value:"SortName"}},ItemsTab.prototype.getReleaseDateSortOption=function(){return{name:globalize.translate("ReleaseDate"),value:"PremiereDate,ProductionYear,SortName"}},ItemsTab.prototype.isGlobalQuery=function(){return!1},ItemsTab.prototype.getFolderSortOption=function(){return null},ItemsTab.prototype.getPlayCountSortOption=function(){return{name:globalize.translate("PlayCount"),value:"PlayCount,SortName"}},ItemsTab.prototype.getDatePlayedSortOption=function(){return{name:globalize.translate("DatePlayed"),value:"DatePlayed,SortName"}},ItemsTab.prototype.getCriticRatingSortOption=function(){return{name:globalize.translate("CriticRating"),value:"CriticRating,SortName"}},ItemsTab.prototype.getCommunityRatingSortOption=function(){return{name:this.getCommunityRatingOptionName(),value:"CommunityRating,SortName"}},ItemsTab.prototype.getCommunityRatingOptionName=function(){return globalize.translate("CommunityRating")},ItemsTab.prototype.getFilterMenuOptions=function(){this.params;return{}},ItemsTab.prototype.getItemTypes=function(){return[]},ItemsTab.prototype.setFilterStatus=function(hasFilters){this.hasFilters=hasFilters;var filterButtons=this.filterButtons;if(filterButtons.length)for(var i=0,length=filterButtons.length;i<length;i++){var btnFilter=filterButtons[i],bubble=btnFilter.querySelector(".filterButtonBubble");if(!bubble){if(!hasFilters)continue;btnFilter.insertAdjacentHTML("afterbegin",'<div class="filterButtonBubble">!</div>'),btnFilter.classList.add("btnFilterWithBubble"),bubble=btnFilter.querySelector(".filterButtonBubble")}hasFilters?bubble.classList.remove("hide"):bubble.classList.add("hide")}},ItemsTab.prototype.onPause=function(){var scroller=this.scroller;scroller&&scroller.pause&&scroller.pause();var itemsContainer=this.itemsContainer;itemsContainer&&itemsContainer.pause&&itemsContainer.pause();var alphaNumericShortcuts=this.alphaNumericShortcuts;alphaNumericShortcuts&&(alphaNumericShortcuts.destroy(),this.alphaNumericShortcuts=null)},ItemsTab.prototype.getEmptyListMessage=function(){return this.hasFilters?Promise.resolve(globalize.translate("NoItemsMatchingFound")):Promise.resolve(globalize.translate("NoItemsFound"))},ItemsTab.prototype.setEmptyListState=function(){this.getEmptyListMessage().then(function(html){html='<div class="flex padded-top align-items-center justify-content-center flex-grow align-items-flex-start">'+html,html+="</div>",this.itemsContainer.innerHTML=html}.bind(this))},ItemsTab.prototype.destroy=function(){this.view=null,this.itemsContainer=null,this.params=null,this.apiClient=null,this.scroller=null,this.filterButtons=null,this.alphaPicker&&(this.alphaPicker.destroy(),this.alphaPicker=null),this.sortButtons=null,this.btnSortText=null,this.btnSortIcon=null,this.alphaPickerElement=null,this.prefixesLoaded=null,this.scrollOnNextRefresh=null},ItemsTab});