define(["../list/list","pluginManager","cardBuilder","loading","mainTabsManager","dom","globalize","layoutManager","cardStyle","emby-linkbutton"],function(ListPage,pluginManager,cardBuilder,loading,mainTabsManager,dom,globalize,layoutManager){"use strict";function getTabs(){return[{href:"plugins",name:globalize.translate("TabMyPlugins")},{href:"plugincatalog",name:globalize.translate("TabCatalog")}]}function sortPlugins(plugin1,plugin2){return plugin1.Name>plugin2.Name?1:-1}function setPluginProperies(plugin,pluginConfigurationPages){plugin.ServerId=ApiClient.serverId(),plugin.Type="Plugin",plugin.PrimaryImageAspectRatio=16/9;var configPage=pluginConfigurationPages.filter(function(pluginConfigurationPage){return pluginConfigurationPage.PluginId===plugin.Id})[0];plugin.ConfigPageUrl=configPage?pluginManager.getConfigurationPageUrl(configPage.Name):null}function PluginsPage(view,params){view.classList.add("withTabs"),view.setAttribute("style","padding-top:0!important;"),params.serverId=ApiClient.serverId(),this.supportsPlayback=!1,this.supportsViewSettings=!1,this.enableMultiSelect=!1,this.enableTotalRecordCountDisplay=!1,ListPage.call(this,view,params),view.addEventListener("viewshow",function(){mainTabsManager.setTabs(this,0,getTabs)})}return Object.assign(PluginsPage.prototype,ListPage.prototype),PluginsPage.prototype.getItems=function(query){return ApiClient.getInstalledPlugins().then(function(plugins){return ApiClient.getJSON(ApiClient.getUrl("web/configurationpages")+"?pageType=PluginConfiguration").then(function(configPages){for(var i=0,length=plugins.length;i<length;i++)setPluginProperies(plugins[i],configPages);return plugins=plugins.sort(sortPlugins)})})},PluginsPage.prototype.getSettingsKey=function(){return"plugins"},PluginsPage.prototype.setTitle=function(){},PluginsPage.prototype.getViewSettings=function(){var settings=ListPage.prototype.getViewSettings.call(this);return settings.showYear=!1,settings},PluginsPage.prototype.getCardOptions=function(items,settings){var options=ListPage.prototype.getCardOptions.apply(this,arguments);return options=Object.assign(options,{centerText:!0,overlayText:!1,showVersion:!0,cardLayout:!0,lines:2})},PluginsPage.prototype.getSortMenuOptions=function(){return[]},PluginsPage.prototype.getVisibleFilters=function(){return[]},PluginsPage.prototype.enableVirtualData=function(){return!1},PluginsPage});