define(["apphost","navDrawerContent","connectionManager","appHeader","loading","layoutManager","apphost","focusManager","dom","globalize","appRouter","emby-scroller","listViewStyle","css!./settings"],function(appHost,navDrawerContent,connectionManager,appHeader,loading,layoutManager,apphost,focusManager,dom,globalize,appRouter){"use strict";return function(view,params){view.querySelector(".appInfo").innerHTML=apphost.appName()+" "+apphost.appVersion(),view.addEventListener("viewbeforeshow",function(e){var isRestored=e.detail.isRestored;loading.hide(),isRestored||function(){var apiClient=params.serverId?connectionManager.getApiClient(params.serverId):connectionManager.currentApiClient();apiClient.getUser(params.userId||apiClient.getCurrentUserId()).then(function(user){!function(apiClient,user){navDrawerContent.getSettingsDrawerHtml({apiClient:apiClient,user:user,userImage:!0,selectServer:!0,signOut:!0,itemsClass:"settings"}).then(function(html){var routesElem=view.querySelector(".dynamicRoutes");routesElem.innerHTML=html,focusManager.autoFocus(routesElem)})}(apiClient,user)})}()}),view.addEventListener("click",navDrawerContent.onNavDrawerClick,!0)}});